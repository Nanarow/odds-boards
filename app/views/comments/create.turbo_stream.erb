<%= turbo_stream.update "board-#{@board.id}-comments-button" do %>
  <%= render 'comments/button', board: @board %>
<% end %>
<%= turbo_stream.update "board-#{@board.id}-comments-count" do %>
  <div class="border my-1"></div>
  <h4>Comments(<%= @board.comments.count %>)</h4>
<% end %>

<% has_parent = @comment.parent_id.present? %>
<% if has_parent %>
  <%= turbo_stream.update "comment-#{@comment.parent_id}-reply-form" do %>
    <%= render 'form', comment: Comment.new, board: @board, parent: @comment %>
  <% end %>
<% else %>
  <%= turbo_stream.update "board-#{@board.id}-comment-form" do %>
    <%= render 'form', comment: Comment.new, board: @board %>
  <% end %>
<% end %>

<% if has_parent %>
  <%= turbo_stream.prepend "comment-#{@comment.parent_id}-replies", @comment %>
<% else %>
  <%= turbo_stream.prepend "board-#{@board.id}-comments", @comment %>
<% end %>
